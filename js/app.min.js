!function(){"use strict";function a(a,b,c){a.$state=b,a.$stateParams=c}function b(a,b){a.html5Mode({enabled:!1,requireBase:!1}),b.otherwise("/")}function c(a){a.setPrefix("idle-miner")}angular.module("app",["app.core","app.home","app.underground-mining","app.office","app.resources","ui.router","LocalStorageModule"]).run(a).config(b).config(c),a.$inject=["$rootScope","$state","$stateParams"],b.$inject=["$locationProvider","$urlRouterProvider"],c.$inject=["localStorageServiceProvider"]}(),function(){"use strict";angular.module("app.core",["LocalStorageModule"])}(),function(){"use strict";function a(a,c,d,e,f){function g(){function b(){k.levels.forEach(function(a){a.workers.forEach(function(a){f.add(a.dig())})})}function g(){var a=e.keys();if(-1==a.indexOf("levels"))k.addLevel();else{var b=e.get("levels");Object.keys(b).forEach(function(a){k.addLevel();for(var c=0;c<b[a].workers;++c)k.levels[a-1].addWorker()})}}function h(){j.names=f.getNames(),a.get("js/app/config/levels.json").success(function(a,b,c,d){angular.extend(j,a);var e=Object.keys(j).filter(function(a){return"names"!=a});j.levels=e.sort()}).error(function(a,b,c,d){console.log("WARNING: can not load levels config")})}function i(){d.$watch(function(){var a={};return k.levels.forEach(function(b){a[b.depth]={workers:b.workers.length}}),JSON.stringify(a)},function(a,b){var c=JSON.parse(a);e.set("levels",c)})}g(),i(),h(),c(b,1e3)}function h(){k.levels.push(new b(k.levels.length+1))}function i(){return Math.pow(60,k.levels.length)}var k={addLevel:h,getNewLevelCost:i,levels:[]};return g(),k}function b(a){var b=this;b.depth=a,b.workers=[]}function c(a){var b=this;b.depth=a}function d(a){for(var b=e(a),c=0;c<j.names.length;++c){var d=j.names[c];if(Math.random()<b[d].chance){var f={};return f[d]=b[d].quantity,f}}}function e(a){for(var b in j.levels)if(b>=a)return j[b];return j[j.levels[j.length-1]]}function f(){var a=this;a.workers.push(new c(a.depth))}function g(){var a=this;return d(a.depth)}function h(){var a=this;return Math.pow(10,a.depth)*Math.pow(1.4,a.workers.length)}function i(){return d(this.depth)}angular.module("app.core").service("levels",a);var j={getConfig:e};a.$inject=["$http","$interval","$rootScope","localStorageService","resources"],b.prototype.addWorker=f,b.prototype.dig=g,b.prototype.getNewWorkerCost=h,c.prototype.dig=i}(),function(){"use strict";function a(a,c){function d(){var b=c.keys();e.cash=0,-1!=b.indexOf("money")&&(e.cash=c.get("money")),a.$watch(function(){return e.cash},function(a,b){c.set("money",a)})}var e=new b;return d(),e}function b(a){function b(){i.forEach(function(a){c[a]=0}),c.add(a)}var c=this;return b(),c}function c(){Object.keys(h).forEach(function(a){i.push(a)})}function d(a){if(a){var b=Object.keys(a),c=this;i.forEach(function(d){-1!=b.indexOf(d)&&(c[d]+=a[d])})}}function e(){return angular.copy(h)}function f(a){return this[a]*h[a].cost}function g(){return angular.copy(i)}angular.module("app.core").service("resources",a);var h={coal:{name:"Coal",cost:1},iron:{name:"Iron",cost:Math.pow(5,1)},tin:{name:"Tin",cost:Math.pow(5,2)},copper:{name:"Copper",cost:Math.pow(5,3)},silver:{name:"Silver",cost:Math.pow(5,4)},gold:{name:"Gold",cost:Math.pow(5,5)}},i=[];c(),a.$inject=["$rootScope","localStorageService"],a.prototype.ResourcesList=b,b.prototype.add=d,b.prototype.getConfig=e,b.prototype.getCost=f,b.prototype.getNames=g}(),function(){"use strict";function a(a){var b={name:"home",templateUrl:"/js/app/home/home.template.html",title:"Mine",url:"/"};a.state(b)}angular.module("app.home",["app.core","app.office","app.resources","ui.router"]).config(a),a.$inject=["$stateProvider"]}(),function(){"use strict";function a(a){var b={name:"sell-center",templateUrl:"js/app/office/sell/sell.template.html",title:"Sell center",url:"/sell"},c={name:"employee-center",templateUrl:"js/app/office/employee/employee.template.html",title:"Employee center",url:"/employee"},d={name:"upgrade-center",templateUrl:"js/app/office/upgrade/upgrade.template.html",title:"Upgrade center",url:"/upgrade"};a.state(b).state(c).state(d)}angular.module("app.office",["app.core","ui.router"]).config(a),a.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){"use strict";function a(a,b){function c(b){return b.getNewWorkerCost()<=a.cash}function d(b){a.cash-=b.getNewWorkerCost(),b.addWorker()}var e=this;e.canHire=c,e.hireWorker=d,e.levels=b}angular.module("app.office").controller("EmployeeCenterController",a),a.$inject=["resources","levels"]}(),function(){"use strict";function a(a){var b={bindToController:!0,controller:"EmployeeCenterController",controllerAs:"employeeCenter",restrict:"EA",templateUrl:"js/app/office/employee/employee-center.directive.html"};return b}angular.module("app.office").directive("mnrEmployeeCenter",a),a.$inject=[]}(),function(){"use strict";function a(a){function b(b){a.cash+=a.getCost(b),a[b]=0}var c=this;c.resources=a,c.sell=b}angular.module("app.office").controller("SellCenterController",a),a.$inject=["resources"]}(),function(){"use strict";function a(a){var b={bindToController:!0,controller:"SellCenterController",controllerAs:"sellCenter",restrict:"EA",templateUrl:"js/app/office/sell/sell-center.directive.html"};return b}angular.module("app.office").directive("mnrSellCenter",a),a.$inject=[]}(),function(){"use strict";function a(a,b){function c(){a.cash-=b.getNewLevelCost(),b.addLevel()}function d(){return b.getNewLevelCost()<=a.cash}var e=this;e.addLevel=c,e.canAddLevel=d,e.levels=b}angular.module("app.office").controller("UpgradeCenterController",a),a.$inject=["resources","levels"]}(),function(){"use strict";function a(a){var b={bindToController:!0,controller:"UpgradeCenterController",controllerAs:"upgradeCenter",restrict:"EA",templateUrl:"js/app/office/upgrade/upgrade-center.directive.html"};return b}angular.module("app.office").directive("mnrUpgradeCenter",a),a.$inject=[]}(),function(){"use strict";angular.module("app.resources",["app.core"])}(),function(){"use strict";function a(a){var b=this;b.resources=a}angular.module("app.resources").controller("InlineResourcesController",a),a.$inject=["resources"]}(),function(){"use strict";function a(){var a={bindToController:!0,controller:"InlineResourcesController",controllerAs:"inline",restrict:"EA",templateUrl:"js/app/resources/inline.directive.html"};return a}angular.module("app.resources").directive("mnrInlineResources",a),a.$inject=[]}(),function(){"use strict";angular.module("app.underground-mining",["app.core"])}(),function(){"use strict";function a(a,b){function c(b){a.add(b.dig())}var d=this;d.dig=c,d.levels=b,d.resources=a}angular.module("app.underground-mining").controller("MineController",a),a.$inject=["resources","levels"]}(),function(){"use strict";function a(){var a={bindToController:!0,controller:"MineController",controllerAs:"mine",restrict:"EA",templateUrl:"/js/app/underground-mining/mine.directive.html"};return a}angular.module("app.underground-mining").directive("mnrMine",a),a.$inject=[]}();
//# sourceMappingURL=app.min.js.map